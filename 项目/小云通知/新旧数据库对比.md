# 新旧数据库改动对比

修改表操作

| 表名        | 旧表字段         | 新表字段                                                     | 操作         |
| ----------- | ---------------- | ------------------------------------------------------------ | ------------ |
| node        |                  | power（节点角色标识）                                        | 新增字段     |
| object      |                  | bg_color（背景颜色）                                         | 新增字段     |
| object      | end_time(int)    | end_time(timestamp)                                          | 修改数据类型 |
| object      |                  | org_ids(text)  （机构id集合，<br />但是一个通知现在只有一个机构，考虑是否有必要text） | 新增字段     |
| object      |                  | team_ids(text)（组id集合）                                   | 新增字段     |
| object      |                  | user_ids(text)（用户id集合）                                 | 新增字段     |
| object      |                  | is_urgent(tinyint)（是否为紧急通知）                         | 新增字段     |
| object      |                  | options(text)（回执选项）                                    | 新增字段     |
| object_user |                  | is_read(tinyint)（是否已读通知）                             | 新增字段     |
| object_user | option_time(int) | option_time(timestamp)                                       | 修改数据类型 |
| object_user | check_time(int)  | check_time(timestamp)                                        | 修改数据类型 |
| object_user | view_time(int)   | view_time(timestamp)                                         | 修改数据类型 |



新增表

```mysql
-- ----------------------------
-- Table structure for team
-- ----------------------------
DROP TABLE IF EXISTS `team`;
CREATE TABLE `team` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `team_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL COMMENT '用户分组名称',
  `status` tinyint(1) NOT NULL DEFAULT '0' COMMENT '状态：0正常，1删除',
  `created_at` timestamp NULL DEFAULT NULL COMMENT '创建时间',
  `updated_at` timestamp NULL DEFAULT NULL COMMENT '更新时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=15 DEFAULT CHARSET=utf8mb4 COMMENT='用户组表（对org_user进行分组）';


-- ----------------------------
-- Table structure for template
-- ----------------------------
DROP TABLE IF EXISTS `template`;
CREATE TABLE `template` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `title` varchar(255) NOT NULL COMMENT '模板标题',
  `describe` varchar(255) NOT NULL COMMENT '模板描述',
  `content` text NOT NULL COMMENT '模板内容',
  `cover` varchar(255) DEFAULT NULL COMMENT '模板封面',
  `icon` varchar(255) DEFAULT NULL COMMENT '基础模板首页显示图标',
  `bg_color` varchar(255) DEFAULT NULL COMMENT '模板背景（如果没有图片，选择背景色显示）',
  `options` text NOT NULL COMMENT '回执选项（JSON字符串）',
  `type` tinyint(4) NOT NULL COMMENT '模板类型（0为基础模板，1为自定义模板）',
  `create_id` int(11) DEFAULT '0' COMMENT '创建者ID（与org_user关联，基础模板为0）',
  `created_at` timestamp NULL DEFAULT NULL COMMENT '创建时间',
  `updated_at` timestamp NULL DEFAULT NULL COMMENT '更新时间',
  `status` tinyint(1) NOT NULL DEFAULT '0' COMMENT '状态：0正常，1删除',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=33 DEFAULT CHARSET=utf8mb4 COMMENT='模板';


-- ----------------------------
-- Table structure for user_team
-- ----------------------------
DROP TABLE IF EXISTS `user_team`;
CREATE TABLE `user_team` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'id\r\n',
  `user_id` int(10) unsigned NOT NULL COMMENT '用户id',
  `team_id` int(10) unsigned NOT NULL COMMENT '用户组id',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=39 DEFAULT CHARSET=utf8mb4 COMMENT='用户与用户组中间表';

```

