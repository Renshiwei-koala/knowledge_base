# 平安科院项目V1.0

## 原型图

前台：https://www.xiaopiu.com/editor?type=project&id=5f4397101ebbb638f7ea3afb

后台：https://www.xiaopiu.com/editor?type=project&id=5f4b55081ebbb638f7ec5eb7



## 简要需求分析

### 主要功能简介

- 被访人（教职工）生成访客链接

- 访客录入信息可由被访人填写，也可以通过微信转发好友填写，链接有效期30min，不考虑使用次数。
  - 可添加随访人员信息
- 用户认证（学校的教职工），需要短信服务
- 审核流程
  - 被访人初次审核确认
  - 如果被访人审核通过将交由上一级（院长书记或者被授权人审核），此时审核通过算为真正通过
- 超级管理员添加访客，直接添加车牌号和来访问时间段即可（访客信息通用使用默认的一套信息）
- 主页
  - 生成访客链接
  - 我的审批
  - 信息通知
- 个人中心，普通的公众号处理
- 调用硬件接口（海康，暂时交由星星调研）



### 重点功能详解

#### 访客认证流程

![image-20200907163222225](https://gitee.com/koala010/typora/raw/master/img/image-20200907163222225.png)

**注意事项：**

- 用户认证为科院校内人员
- 访客链接有效期30min，可多次使用（可使用redis）
- 暂时访客人员只能添加一个车牌号，如果有多辆车暂定多发送几次访客请求



#### 权限管理

权限分级：

- 超级管理员（保卫处），只有保卫处可以访问后台
- 院长/书记
- 被授权人（由院长/书记授权，每个院长/书记最多授权两人）
- 教职工（普通用户）



公众号授权注意事项：

- 审批授权组件，只有当用户为==院长/书记==时才显示。
- 如果==院长/书记==有授权人，则通知不发给院长书记，但院长书记有审批的权限。



![image-20200907164330756](https://gitee.com/koala010/typora/raw/master/img/image-20200907164330756.png)



#### 用户认证

生成访客链接前先进行用户认证

用户认证前后边背景无内容，认证成功在跳转生成访客链接的界面，若认证失败进行友好提示（可以进行重新认证）。

![image-20200907170425246](https://gitee.com/koala010/typora/raw/master/img/image-20200907170425246.png)

## 技术选型

后端：

- 以EL-ADMIN为基础搭建的角色权限管理框架（marchsoft_api）（Springboot+mybatisplus+mysql）
- springdata redis
- 公众号框架WxJava



前台：

- Vue+vant-weapp

  

后台：

- 以EL-ADMIN为基础的后台管理通用框架（common-eladmin-web）
- Vue+Element UI



### 数据库

59.110.218.15:3307

pinganky

Paky@2020



## GitLab项目

safe_keyuan

后端、前台、后台三套代码全部放置==safe_keyuan==仓库，方便统一管理



# 时间安排

- 了解需求及技术准备（9.7-9.9）

- 项目排期及制定开发计划（9.8）

- 开发阶段（9.9~待定）
  - 数据库设计
  - 环境搭建
  - 开发
- 联调
- bug修复
- 交付

